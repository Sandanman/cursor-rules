---
description: API 调用和数据处理规范
globs: src/api/**/*
alwaysApply: false
---

# API 调用规范

## 请求封装

- 所有 API 请求统一使用 `request` 函数
- API 函数统一放在 `src/api/` 目录
- 使用 `AppConfig.apiUrlOnline` 作为基础 URL

## 错误处理

- API 调用必须包含错误处理
- 错误信息要记录到控制台
- 向上抛出错误，由调用方处理

## 数据格式

- 请求体使用 `JSON.stringify` 序列化
- 设置正确的 `Content-Type` 头
- 使用 `async/await` 处理异步请求

## API 组织

- 按功能模块组织 API（如 `userAPI`、`meetingAPI`）
- 每个 API 函数要有清晰的注释
- 函数名使用动词开头（如 `get`、`create`、`update`、`delete`）

## 示例

```javascript
// ✅ GOOD
export const meetingAPI = {
    createMeeting: async (data) => {
        return request(`${AppConfig.apiUrlOnline}/api/meeting/create`, {
            method: 'POST',
            body: JSON.stringify(data),
        })
    },
}

// ❌ BAD
export const createMeeting = (data) => {
    fetch('/api/meeting/create', {
        method: 'POST',
        body: data, // 未序列化
    }) // 没有错误处理
}
```
